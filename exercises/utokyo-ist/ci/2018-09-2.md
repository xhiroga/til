# 2019年度 創造情報学 第2問

## (1)

```python
count = 0
i = 0
while True:
    if  panel[i] != 0:
        count+= 1
    i += 1
    if i == n:
        break
```

計算時間は、パネルの値の比較と不具合のカウントで$n+\log_{2}n$単位時間となる。

## (2)

表引きの計算時間のみ考えればよいので、1単位時間でよい。

## (3)

索引のビット数が$n/2$の表を用意する。

(解答途中)

## (4)

真理値表（2進数として見やすいよう、o2,o1の順番で配してある）

| b1  | b2  | b3  | o2  | o1  |
| --- | --- | --- | --- | --- |
| 0   | 0   | 0   | 0   | 0   |
| 0   | 0   | 1   | 0   | 1   |
| 0   | 1   | 0   | 0   | 1   |
| 0   | 1   | 1   | 1   | 0   |
| 1   | 0   | 0   | 0   | 1   |
| 1   | 0   | 1   | 1   | 0   |
| 1   | 1   | 0   | 1   | 0   |
| 1   | 1   | 1   | 1   | 1   |

回路図は次の通り。半加算器を2つ組み合わせて作った。

```mermaid
flowchart LR
    b1:::io
    b2:::io
    b3:::io
    o1:::io
    o2:::io
    or1[OR]
    or2[OR]
    or3[OR]
    and1[AND]
    and2[AND]
    and3[AND]
    and4[AND]
    not1[NOT]
    not2[NOT]
    b1-->or1
    b2-->or1
    b1-->and1
    b2-->and1
    and1-->not1
    or1-->and2
    not1-->and2
    and2-->or2
    b3-->or2
    and2-->and3
    b3-->and3
    and3-->not2
    or2-->and4
    not2-->and4
    and1-->or3
    and3-->or3
    and4-->o1
    or3-->o2
    classDef io fill:#fff,stroke-width:0px
```

## (5)

```mermaid
flowchart LR
    subgraph p3_1[P3]
        p3_1_o1
        p3_1_o2
    end
    subgraph p3_2[P3]
        p3_2_o1
        p3_2_o2
    end
    subgraph p3_3[P3]
        p3_3_o1
        p3_3_o2
    end
    o1:::io
    o2:::io
    o3:::io
    or1[OR]
    and1[AND]
    and2[AND]
    not1[NOT]
    p3_1_o1-->or1
    p3_2_o1-->or1
    p3_1_o1-->and1
    p3_2_o1-->and1
    and1-->not1
    or1-->and2
    not1-->and2
    and2-->o1
    and1-->p3_3
    p3_1_o2-->p3_3
    p3_2_o2-->p3_3
    p3_3_o1-->o2
    p3_3_o2-->o3
    classDef io fill:#fff,stroke-width:0px
```

## (6)

どのような遅延が問題となるかを考える。(5)の回路を組み合わせて入力12ビットのpopulation count論理回路$P_{12}$を構成する。$P_{12}$の4ビット目の演算には3ビット目の計算結果が必要になり、3ビット目には2ビット目の...と、nが大きくなるほど遅延が問題になることが分かる。

解決のため、桁上りを先取りすることが考えられる。例えば3ビット目の演算で2ビット目の計算結果を待つのではなく、考えられる組み合わせを並列で計算し、そのORを取る。

1. 3ビット目の入力がいずれも1
2. 3ビット目の入力の片方が1で、2ビット目の入力がいずれも1
3. 3ビット目, 2ビット目の入力の片方が1で、1ビット目の入力がいずれも1
